{#{{ dump() }}#}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>PubLeash {% block title %}{% endblock %}</title>
    <meta name="description" content="The HTML5 Herald">
    <meta name="author" content="Night">
    {% block javascript %}
        {% javascripts '@PubLeashBundle/Resources/JavaScript/*'
        '@bootstrap_js' %}
        <script src="{{ asset_url }}"></script>
        {% endjavascripts %}
    {% endblock %}
    {% block stylesheets %}
        {% stylesheets '@bootstrap_css'
        '@PubLeashBundle/Resources/Css/*' %}
        <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}">
        {% endstylesheets %}
    {% endblock %}

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script type="application/javascript">
        var apiUrl = '{{ path('publeash_api_request') }}';
    </script>
</head>

<body>
{% block navigation %}
    {{ include("PubLeashBundle:navigation.html.twig") }}
{% endblock %}
<div id="wrapper">
    <div class="row">
        <div class="container-fluid">
            {% block side_nav %}
            {% endblock %}
            <div class="">
                {% block breadcrumbs %}
                    {{ include("PubLeashBundle:breadbrumbs.html.twig") }}
                {% endblock %}
                <div class="container-fluid" id="flash-messages"></div>
                <div class="container-fluid">
                    {% block body %}
                    {% endblock %}
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="col-lg-5">

            {#{{ dump() }}#}
        </div>
    </div>
</div>
</body>
</html>

{% macro stars(rank) %}
    {% for i in 1..5 %}
        {% if rank >= 1 %}
            <i class="glyphicon glyphicon-star star-color"></i>
        {% elseif rank > 0 %}
            <i class="glyphicon glyphicon-star-half glyphicon-star-empty star-color"></i>
        {% else %}
            <i class="glyphicon glyphicon-star-empty star-color-empty"></i>
        {% endif %}
        {% set rank = (rank - 1) %}
    {% endfor %}
{% endmacro %}

{% macro reviews(data) %}
    <ul class="media-list">
        {% for review in data %}
            <li class="media panel panel-default review">
                <div class="media-left media-top">
                    <a href="#">
                        <img class="media-object" src="{{ gravatar(review.author.email, 64, 'g') }}"
                             alt="{{ review.author.username }}">
                    </a>
                </div>
                <div class="media-body">
                    <h4 class="media-heading">{{ review.author.username }}
                        <small>{{ review.getDateCreate }}</small>
                    </h4>
                    <p>{{ review.text }}</p>
                </div>
                {% set subreviews = review.reviews %}
                {% if subreviews is not empty %}
                    <ul class="media-list">
                        {% for subreview in subreviews %}
                            <li class="media panel panel-default review">
                                <div class="media-left media-top">
                                    <a href="#">
                                        <img class="media-object" src="{{ gravatar(subreview.author.email, 64, 'g') }}"
                                             alt="{{ subreview.author.username }}">
                                    </a>
                                </div>
                                <div class="media-body">
                                    <h4 class="media-heading">{{ subreview.author.username }}
                                        <small>{{ review.getDateCreate }}</small>
                                    </h4>
                                    <p>{{ subreview.text }}</p>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endmacro %}